#!/usr/bin/env ruby
# frozen_string_literal: true

require "debtective"
require "debtective/output_todos"

user_name =
  if ARGV.include?("--me")
    `git config user.name`.strip
  elsif ARGV.include?("--user")
    ARGV[ARGV.index("--user") + 1]
  end

if user_name
  puts "Searching TODOs from #{user_name}..."
else
  puts "Searching TODOs..."
end

quiet = ARGV.include?("--quiet")
Debtective::OutputTodos.new(user_name, quiet: quiet).call
